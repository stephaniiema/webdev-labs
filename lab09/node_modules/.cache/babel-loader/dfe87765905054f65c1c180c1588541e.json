{"ast":null,"code":"var _jsxFileName = \"/Users/stephma/Documents/GitHub/webdev-labs/lab09/src/LikeButton.js\";\nimport React from 'react';\nimport { getHeaders } from './utils.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LikeButton extends React.Component {\n  constructor(props) {\n    super(props); // data we need: \n    // 1. whether current post is liked or unliked\n    // 2. which post to like/unlike (postid)\n\n    this.likeUnlike = this.likeUnlike.bind(this);\n    this.like = this.like.bind(this);\n    this.unlike = this.unlike.bind(this);\n  }\n\n  likeUnlike(ev) {\n    console.log('likeUnlike');\n\n    if (this.props.likeId) {\n      this.unlike();\n    } else {\n      this.like();\n    }\n  }\n\n  like() {\n    console.log('like');\n    const postId = this.props.postId;\n    fetch('/api/posts/' + postId + '/likes', {\n      headers: getHeaders(),\n      body: JSON.stringify({}),\n      method: \"POST\"\n    }).then(response => response.json()).then(data => {\n      console.log(data); // calling the parent Component (Post's) function.\n\n      this.props.requeryPost();\n    });\n  }\n\n  unlike() {\n    console.log('unlike');\n    const postId = this.props.postId;\n    const likeId = this.props.likeId;\n    fetch('/api/posts/' + postId + '/likes/' + likeId, {\n      headers: getHeaders(),\n      method: \"DELETE\"\n    }).then(response => response.json()).then(data => {\n      console.log(data); // calling the parent Component (Post's) function.\n\n      this.props.requeryPost();\n    });\n  }\n\n  render() {\n    const likeId = this.props.likeId;\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"like\",\n      onClick: this.likeUnlike,\n      \"aria-checked\": likeId ? true : false,\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: likeId ? 'fas fa-heart' : 'far fa-heart'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default LikeButton;","map":{"version":3,"sources":["/Users/stephma/Documents/GitHub/webdev-labs/lab09/src/LikeButton.js"],"names":["React","getHeaders","LikeButton","Component","constructor","props","likeUnlike","bind","like","unlike","ev","console","log","likeId","postId","fetch","headers","body","JSON","stringify","method","then","response","json","data","requeryPost","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,QAAyB,YAAzB;;;AAEA,MAAMC,UAAN,SAAyBF,KAAK,CAACG,SAA/B,CAAyC;AAErCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN,EADe,CAEf;AACA;AACA;;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKC,IAAL,GAAY,KAAKA,IAAL,CAAUD,IAAV,CAAe,IAAf,CAAZ;AACA,SAAKE,MAAL,GAAc,KAAKA,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAAd;AACH;;AAEDD,EAAAA,UAAU,CAAEI,EAAF,EAAM;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;;AACA,QAAG,KAAKP,KAAL,CAAWQ,MAAd,EAAsB;AAClB,WAAKJ,MAAL;AACH,KAFD,MAEO;AACH,WAAKD,IAAL;AACH;AACJ;;AAEDA,EAAAA,IAAI,GAAI;AACJG,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,UAAME,MAAM,GAAG,KAAKT,KAAL,CAAWS,MAA1B;AACAC,IAAAA,KAAK,CAAC,gBAAgBD,MAAhB,GAAyB,QAA1B,EAAoC;AACrCE,MAAAA,OAAO,EAAEf,UAAU,EADkB;AAErCgB,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,EAAf,CAF+B;AAGrCC,MAAAA,MAAM,EAAE;AAH6B,KAApC,CAAL,CAIGC,IAJH,CAIQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAJpB,EAKCF,IALD,CAKMG,IAAI,IAAI;AACVb,MAAAA,OAAO,CAACC,GAAR,CAAYY,IAAZ,EADU,CAEV;;AACA,WAAKnB,KAAL,CAAWoB,WAAX;AACH,KATD;AAUH;;AAEDhB,EAAAA,MAAM,GAAI;AACNE,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,UAAME,MAAM,GAAG,KAAKT,KAAL,CAAWS,MAA1B;AACA,UAAMD,MAAM,GAAE,KAAKR,KAAL,CAAWQ,MAAzB;AACAE,IAAAA,KAAK,CAAC,gBAAgBD,MAAhB,GAAyB,SAAzB,GAAqCD,MAAtC,EAA8C;AAC/CG,MAAAA,OAAO,EAAEf,UAAU,EAD4B;AAE/CmB,MAAAA,MAAM,EAAE;AAFuC,KAA9C,CAAL,CAGGC,IAHH,CAGQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAHpB,EAICF,IAJD,CAIMG,IAAI,IAAI;AACVb,MAAAA,OAAO,CAACC,GAAR,CAAYY,IAAZ,EADU,CAEV;;AACA,WAAKnB,KAAL,CAAWoB,WAAX;AACH,KARD;AASH;;AAEDC,EAAAA,MAAM,GAAI;AACN,UAAMb,MAAM,GAAG,KAAKR,KAAL,CAAWQ,MAA1B;AACA,wBACI;AAAQ,MAAA,SAAS,EAAC,MAAlB;AACI,MAAA,OAAO,EAAG,KAAKP,UADnB;AAEI,sBAAeO,MAAM,GAAG,IAAH,GAAU,KAFnC;AAAA,6BAGI;AAAG,QAAA,SAAS,EAAGA,MAAM,GAAG,cAAH,GAAoB;AAAzC;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAOH;;AA5DoC;;AA+DzC,eAAeX,UAAf","sourcesContent":["import React from 'react';\nimport {getHeaders} from './utils.js';\n\nclass LikeButton extends React.Component { \n\n    constructor(props) {\n        super(props);\n        // data we need: \n        // 1. whether current post is liked or unliked\n        // 2. which post to like/unlike (postid)\n        this.likeUnlike = this.likeUnlike.bind(this);\n        this.like = this.like.bind(this);\n        this.unlike = this.unlike.bind(this);\n    }\n\n    likeUnlike (ev) {\n        console.log('likeUnlike');\n        if(this.props.likeId) {\n            this.unlike();\n        } else {\n            this.like();\n        }\n    }\n\n    like () {\n        console.log('like');\n        const postId = this.props.postId;\n        fetch('/api/posts/' + postId + '/likes', {\n            headers: getHeaders(),\n            body: JSON.stringify({}),\n            method: \"POST\"\n        }).then(response => response.json())\n        .then(data => {\n            console.log(data);\n            // calling the parent Component (Post's) function.\n            this.props.requeryPost();\n        })\n    }\n\n    unlike () {\n        console.log('unlike');\n        const postId = this.props.postId;\n        const likeId= this.props.likeId;\n        fetch('/api/posts/' + postId + '/likes/' + likeId, {\n            headers: getHeaders(),\n            method: \"DELETE\"\n        }).then(response => response.json())\n        .then(data => {\n            console.log(data);\n            // calling the parent Component (Post's) function.\n            this.props.requeryPost();\n        })\n    }\n\n    render () {\n        const likeId = this.props.likeId;\n        return (\n            <button className='like' \n                onClick={ this.likeUnlike }\n                aria-checked={ likeId ? true : false}>\n                <i className={ likeId ? 'fas fa-heart' : 'far fa-heart'}></i>\n            </button>\n        ); \n    }\n}\n\nexport default LikeButton;"]},"metadata":{},"sourceType":"module"}